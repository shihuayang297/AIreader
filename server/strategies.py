# strategies.py
# 🔥🔥🔥 领航者·小师 的话术策略库 (完整版) 🔥🔥🔥
# 这里存放所有的“主动触发”话术，修改这里立刻生效，无需重启服务

# ==========================================
# 1. 章节切换策略 (对应 Excel: 问题解决策略)
# ==========================================
# 逻辑：根据章节标题(小写关键词)匹配
SECTION_MAP = {
    "introduction": """@Stu，你已进入【引言】部分。这是论文的门面，请思考：
● 作者为什么要研究这个问题？（研究背景）
● 现有的研究有什么不足？（研究缺口）
● 本文的核心贡献是什么？""",

    "method": """@Stu，你已进入【方法论】部分。这是研究的地基，请重点关注：
● 作者采用了什么研究方法？为了验证假设，具体设计了哪些测量工具或评估指标？
● 如果由你来应用本文的研究范式，针对你感兴趣的另一个领域，你能构思出一个基本思路吗？""",

    "result": """@Stu，你已进入【结果】部分。请带着批判性思维阅读：
● 数据结果是否真的支持了最初的假设？
● 有没有什么“意外”的发现？""",

    "discussion": """@Stu，你已进入【讨论】部分。这是升华主题的地方：
● 作者是如何解释这些结果的？
● 这个结论对现实教育有什么指导意义？""",

    "limit": """@Stu，你已进入【局限性】部分。这是最见诚意的地方：
● 作者承认了哪些不足？
● 这些不足是否会影响结论的可信度？
● 未来的研究可以从哪里突破？""",

    "conclusion": """@Stu，恭喜你读到了【结论】！
● 请尝试用一句话概括本文的核心发现。
● 读完后，你最初的疑问得到解决了吗？"""
}

# 兜底：如果章节名匹配不到上面的关键词
DEFAULT_SECTION_MSG = """@Stu，你已进入新的阅读阶段。请思考：
● 这一节的核心论点是什么？
● 它和上一节的逻辑关系是怎样的？"""


# ==========================================
# 2. 事件触发策略 (对应 Excel: 其他三种策略)
# ==========================================
# Key 必须与前端传来的 trigger_event 完全一致
EVENT_MAP = {
    # 场景：首次进入
    "start": """@Stu，你好！我是领航者·小师。
在开始深入阅读之前，建议你先快速浏览标题与摘要，预测一下：
● 本文想要解决的核心问题是什么？
● 它可能得出了什么结论？""",

    # 场景：停留时间过长 (认知过载提醒)
    "idle_reminder": """@Stu，注意到你在此处停留较长时间了。重新聚焦注意力对理解很有帮助。
如果是因内容困难，建议你：
● 遇到术语或背景知识缺失？请 @百科助手 咨询。
● 逻辑复杂需要推导？请 @脑洞工程师 咨询。""",

    # 场景：阅读过半 (支持阅读策略)
    "half_progress": """@Stu，你已完成半数内容的研读，但系统监测到你尚未记录心得。
为了固化理解，建议你：
● 回看【文献综述】部分，尝试画出作者提到的核心理论框架及其演变路径。
● 开启“边读边记”模式，即便是简短的感悟也能帮你有效维持专注！""",

    # 场景：连续阅读两章无交互 (深度交互策略)
    "deep_reading": """@Stu，你已连续研读完两个核心章节，期间表现得非常专注。
为了确保对这两部分复杂逻辑的深度内化，建议你不要只是独立思考：
● 遇到专业术语障碍可以 @百科助手；
● 如果对文中的数据推导或理论关联有疑问，欢迎随时调用 @脑洞工程师 进行探究。"""
}